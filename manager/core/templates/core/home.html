{% extends "base.html" %}

{% block head_title %}Home{% endblock %}

{% block content_outer %}
<div class="jumbotron">
    <div class="container">
    <h1>Playlist Manager</h1>
    <p>Welcome to the web application that let's you create, manage and share playlists!</p>
    {% if user.is_authenticated %}
    <form action="{% url 'playlist:create' user.id %}">
        <button class="btn btn-default btn-lg" type="submit">Create Playlist</button>
    </form>
    {% else %}
    <form action="{% url 'account_signup' %}">
        <button class="btn btn-default btn-lg" type="submit">Signup</button>
    </form>
    {% endif %}
    </div>
</div>
<div class="container">
    <h1>Latest Added Songs</h1>
    <table class="table table-hover table-bordered">
        <thead>
            <tr>
                <th>Song</th>
                <th>Playlist</th>
                <th>Added</th>
            </tr>
        </thead>
        <tbody>
        {% for song in songs %}
        <tr>
            <td><a href="{{song.tinysong}}">{{song.name}} - {{song.artist}}</a></td>
            <td><a href="{% url 'song:all' song.playlist.user.id song.playlist.id %}">{{song.playlist.name}}</a></td>
            <td>{{song.created_at}}</td>
        </tr>
        {% endfor %}
    </table>
    <form action="{% url 'core:song' %}">
        <button class="btn btn-default" type="submit">View More Songs >></button>
    </form>
    <h1>Latest Created Playlists</h1>
    <table class="table table-hover table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Songs</th>
                <th>Creator</th>
                <th>Created</th>
                <th>Updated</th>
            </tr>
        </thead>
        <tbody>
        {% for playlist in playlists %}
        <tr>
            <td><a href="{% url 'song:all' playlist.user.id playlist.id %}">{{playlist.name}}</a></td>
            <td>{{playlist.song_count}}</td>
            <td><a href="{% url 'playlist:all' playlist.user.id %}">{{playlist.user.username}}</a></td>
            <td>{{playlist.created_at}}</td>
            <td>{{playlist.updated_at}}</td>
        </tr>
        {% endfor %}
    </table>
    <form action="{% url 'core:playlist' %}">
        <button class="btn btn-default" type="submit">View More Playlists >></button>
    </form>
</div>
{% endblock %}